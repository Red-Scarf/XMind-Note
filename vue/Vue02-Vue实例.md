## Vue02-Vue实例
### 创建实例
* 每个 Vue 应用都是通过用 Vue 函数创建一个新的 Vue 实例开始的
```
var vm = new Vue({
  // 选项
})
```
* 创建一个 Vue 实例时，你可以传入一个选项对象
* 一个 Vue 应用由一个通过 new Vue 创建的根 Vue 实例，以及可选的嵌套的、可复用的组件树组成
* 所有的 Vue 组件都是 Vue 实例，并且接受相同的选项对象 (一些根实例特有的选项除外)

### 数据与方法
* 当一个 Vue 实例被创建时，它将 data 对象中的所有的属性加入到 Vue 的响应式系统中。这些属性的值发生改变时，视图将会产生“响应”，即匹配更新为新的值。
#### 我们的数据对象
```
var data = { a: 1 }
```
* 该对象被加入到一个 Vue 实例中
```
var vm = new Vue({
  data: data
})
```
* 获得这个实例上的属性，返回源数据中对应的字段
```
vm.a == data.a // => true
```
* 设置属性也会影响到原始数据
```
vm.a = 2
data.a // => 2
```
* 反之亦然
```
data.a = 3
vm.a // => 3
```
* vue的data属性获取到外部对象
  * 可以直接使用  vue对象.外部对象属性  的方式进行调用
  * 两个对象所引用的属性时同一个，所以不论通过哪个对象进行属性修改，都会改变该引用
* 只有当实例被创建时 data 中存在的属性才是响应式的
  * 也就是说如果你添加一个新的属性，那么对该属性的改动将不会触发任何视图的更新
  * 唯一的例外是使用 Object.freeze(对象)
这会阻止修改现有的属性，也意味着响应系统无法再追踪变化
* Vue 实例还暴露了一些有用的实例属性与方法
前缀 `$`
```
// $watch 是一个实例方法
vm.$watch('a', function (newValue, oldValue) {
  // 这个回调将在 `vm.a` 改变后调用
})
```

### 生命周期钩子
* 每个 Vue 实例在被创建时都要经过一系列的初始化过程
  * 例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等
  * 同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会
#### 钩子
* created
  * 在一个实例被创建之后执行代码
  * 在实例创建完成后被立即调用
  * 实例已完成以下的配置：
    * 数据观测 (data observer)
    * 属性和方法的运算
    * watch/event 事件回调
  * 挂载阶段还没开始，$el 属性目前不可见。
```
created: function () {
  // `this` 指向 vm 实例
  console.log('a is: ' + this.a)
}
```
* mounted
  * el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用该钩子。
  * 如果 root 实例挂载了一个文档内元素，当 mounted 被调用时 vm.$el 也在文档内
  * **不会承诺所有的子组件也都一起被挂载**
  * **该钩子在服务器端渲染期间不被调用**
* updated
  * 由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。
  * 当这个钩子被调用时，组件 DOM 已经更新
    * 所以你现在可以执行依赖于 DOM 的操作
    * 然而在大多数情况下，你应该避免在此期间更改状态
  * 不会承诺所有的子组件也都一起被重绘
* destroyed
  * Vue 实例销毁后调用
  * 调用后
    * Vue 实例指示的所有东西都会解绑定
    * 所有的事件监听器会被移除
    * 所有的子实例也会被销毁。
  * **该钩子在服务器端渲染期间不被调用**
>生命周期钩子的 this 上下文指向调用它的 Vue 实例

#### 注意
>不要在选项属性或回调上使用箭头函数
* 因为箭头函数并没有 this，this 会作为变量一直向上级词法作用域查找，直至找到为止
* `created: () => console.log(this.a)` 或 `vm.$watch('a', newValue => this.myMethod())`
* 经常导致 `Uncaught TypeError: Cannot read property of undefined` 或 `Uncaught TypeError: this.myMethod is not a function` 之类的错误
